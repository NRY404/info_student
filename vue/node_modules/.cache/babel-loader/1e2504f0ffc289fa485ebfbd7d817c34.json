{"ast":null,"code":"//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  name: \"Header\",\n  data: function data() {\n    return {\n      formTitle: '',\n      form: {},\n      dialogVisible: false,\n      userIn: localStorage.getItem(\"userIn\") ? JSON.parse(localStorage.getItem(\"userIn\")) : {}\n    };\n  },\n  props: {\n    collapseBtnClass: String,\n    collapse: Function\n  },\n  created: function created() {\n    this.getUser();\n  },\n  methods: {\n    loginOut: function loginOut() {\n      this.$router.push(\"/login\");\n      localStorage.removeItem(\"userIn\");\n      this.$message.success(\"退出成功\");\n    },\n    handleEdit: function handleEdit() {\n      this.form = this.userIn; //将row拷贝到空对象中，解决没点确定 表中数据改变的问题\n\n      this.dialogVisible = true;\n      this.formTitle = '个人信息';\n    },\n    //          头像上传成功\n    handleAvatarSuccess: function handleAvatarSuccess(res) {\n      this.form.avatar = res;\n    },\n    getUser: function getUser(row) {\n      this.form = Object.assign({}, row);\n    },\n    uploadAvatar: function uploadAvatar() {\n      var _this = this;\n\n      this.request.post(\"/user/add\", this.form).then(function (resp) {\n        if (resp) {\n          //    添加成功\n          //    关闭窗口\n          _this.dialogVisible = false;\n\n          _this.$message({\n            message: '操作成功!',\n            type: 'success'\n          });\n        } else {\n          _this.$message.error(\"保存失败\");\n        }\n      });\n    },\n    beforeAvatarUpload: function beforeAvatarUpload(file) {\n      var isJPG = file.type === 'image/jpeg' || 'image/png';\n      var isLt2M = file.size / 1024 / 1024 < 2;\n\n      if (!isJPG) {\n        this.$message.error('上传头像图片只能是 JPG 格式!');\n      }\n\n      if (!isLt2M) {\n        this.$message.error('上传头像图片大小不能超过 2MB!');\n      }\n\n      return isJPG && isLt2M;\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyEA;AACAA,gBADA;AAEAC,MAFA,kBAEA;AACA;AACAC,mBADA;AAEAC,cAFA;AAGAC,0BAHA;AAIAC;AAJA;AAMA,GATA;AAUAC;AACAC,4BADA;AAEAC;AAFA,GAVA;AAcAC,SAdA,qBAcA;AACA;AACA,GAhBA;AAiBAC;AACAC,YADA,sBACA;AACA;AACAC;AACA;AACA,KALA;AAMAC,cANA,wBAMA;AACA,8BADA,CACA;;AACA;AACA;AACA,KAVA;AAYA;AACAC,uBAbA,+BAaAC,GAbA,EAaA;AACA;AACA,KAfA;AAgBAC,WAhBA,mBAgBAC,GAhBA,EAgBA;AACA;AACA,KAlBA;AAmBAC,gBAnBA,0BAmBA;AAAA;;AACA;AACA;AACA;AACA;AACA;;AACA;AACAC,4BADA;AAEAC;AAFA;AAIA,SARA,MAQA;AACA;AACA;AAGA,OAdA;AAeA,KAnCA;AAoCAC,sBApCA,8BAoCAC,IApCA,EAoCA;AACA;AACA;;AAEA;AACA;AACA;;AACA;AACA;AACA;;AACA;AACA;AA/CA;AAjBA","names":["name","data","formTitle","form","dialogVisible","userIn","props","collapseBtnClass","collapse","created","methods","loginOut","localStorage","handleEdit","handleAvatarSuccess","res","getUser","row","uploadAvatar","message","type","beforeAvatarUpload","file"],"sourceRoot":"src/components","sources":["Header.vue"],"sourcesContent":["<template>\r\n    <div style=\" font-size: 12px;display: flex; \">\r\n        <div style=\"flex: 1;font-size: 20px;\">\r\n            <span :class=\"collapseBtnClass\" style=\"cursor: pointer\" @click=\"collapse\"></span>\r\n        </div>\r\n        <div style=\"text-align: right;font-size: 12px;width: 200px;\"></div>\r\n        <el-dropdown style=\"width: 120px;cursor: pointer\">\r\n            <div style=\"display: inline-block\">\r\n                <img style=\"width: 30px;border-radius: 50%;position: relative;top: 10px;right: 15px;\" :src=\"userIn.avatar\" alt=\"\">\r\n                <i class=\"el-icon-setting\" style=\"margin-right: 15px\"><span>{{ userIn.nickname}}</span></i>\r\n            </div>\r\n            <el-dropdown-menu style=\"margin-right: 30px\" slot=\"dropdown\" >\r\n                <el-dropdown-item>\r\n                    <el-button style=\" font-size: 14px; padding: 5px 0; text-decoration: none;color: #B3C0D1;border: none;\"\r\n                            @click=\"handleEdit()\">个人信息</el-button>\r\n                </el-dropdown-item>\r\n                <el-dropdown-item>\r\n                    <el-button style=\" font-size: 14px; padding: 5px 0; text-decoration: none;color: #B3C0D1;border: none;\" @click=\"loginOut\">退出</el-button>\r\n                </el-dropdown-item>\r\n            </el-dropdown-menu>\r\n        </el-dropdown>\r\n        <div style=\"margin: 10px 0\">\r\n            <!--    查看个人信息 的表单-->\r\n            <el-dialog\r\n                    :title=\"formTitle\"\r\n                    :visible.sync=\"dialogVisible\"\r\n                    width=\"30%\">\r\n\r\n                <el-form ref=\"form\" :model=\"form\" label-width=\"80px\" size=\"small\">\r\n                    <el-form-item label=\"头像\" style=\"line-height: 50px;height: 50px\">\r\n                        <el-upload\r\n                                class=\"avatar-uploader\"\r\n                                action=\"http://localhost:8081/user/add\"\r\n                                accept=\".jpg,.jpeg,.png,.JPG,.JPEG\"\r\n                                :show-file-list=\"false\"\r\n                                :on-success=\"handleAvatarSuccess\"\r\n                                :before-upload=\"beforeAvatarUpload\">\r\n                            <img style=\"width: 50px;border-radius: 50%;  left: 35px; cursor: pointer;\r\n                                        display: block;\r\n                                        box-shadow: 3px 5px 5px rgba(135,206,235, 0.3);\"\r\n                                 v-if=\"form.avatar\" :src=\"form.avatar\" alt=\"头像\" class=\"avatar\">\r\n                            <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\r\n                        </el-upload>\r\n                    </el-form-item>\r\n                    <el-form-item label=\"姓名\">\r\n                        <el-input v-model=\"form.username\" :disabled=\"true\"></el-input>\r\n                    </el-form-item>\r\n                    <el-form-item label=\"密码\">\r\n                        <el-input v-model=\"form.password\" :disabled=\"true\"></el-input>\r\n                    </el-form-item>\r\n                    <el-form-item label=\"昵称\">\r\n                        <el-input v-model=\"form.nickname\" :disabled=\"true\"></el-input>\r\n                    </el-form-item>\r\n                    <el-form-item label=\"电话\">\r\n                        <el-input v-model=\"form.phone\" :disabled=\"true\"></el-input>\r\n                    </el-form-item>\r\n                    <el-form-item label=\"邮箱\">\r\n                        <el-input v-model=\"form.email\" :disabled=\"true\"></el-input>\r\n                    </el-form-item>\r\n                    <el-form-item label=\"地址\">\r\n                        <el-input type=\"textarea\" v-model=\"form.address\" :disabled=\"true\"></el-input>\r\n                    </el-form-item>\r\n                    <el-form-item>\r\n                        <el-button @click=\"uploadAvatar\" >OK</el-button>\r\n                    </el-form-item>\r\n                </el-form>\r\n            </el-dialog>\r\n        </div>\r\n    </div>\r\n\r\n</template>\r\n\r\n<script>\r\n    export default {\r\n        name: \"Header\",\r\n        data(){\r\n          return{\r\n              formTitle: '',\r\n              form: { },\r\n              dialogVisible: false,\r\n              userIn:localStorage.getItem(\"userIn\") ? JSON.parse(localStorage.getItem(\"userIn\")) : {}\r\n          }\r\n        },\r\n        props: {\r\n            collapseBtnClass: String,\r\n            collapse: Function\r\n        },\r\n        created() {\r\n            this.getUser();\r\n        },\r\n        methods: {\r\n            loginOut() {\r\n                this.$router.push(\"/login\");\r\n                localStorage.removeItem(\"userIn\");\r\n                this.$message.success(\"退出成功\");\r\n            },\r\n            handleEdit() {\r\n                this.form = this.userIn; //将row拷贝到空对象中，解决没点确定 表中数据改变的问题\r\n                this.dialogVisible = true;\r\n                this.formTitle = '个人信息';\r\n            },\r\n\r\n//          头像上传成功\r\n            handleAvatarSuccess(res) {\r\n                this.form.avatar = res;\r\n            },\r\n            getUser(row){\r\n                this.form = Object.assign({},row);\r\n            },\r\n            uploadAvatar(){\r\n                this.request.post(\"/user/add\",this.form).then(resp => {\r\n                    if (resp){\r\n                        //    添加成功\r\n                        //    关闭窗口\r\n                        this.dialogVisible = false;\r\n                        this.$message({\r\n                            message: '操作成功!',\r\n                            type: 'success'\r\n                        });\r\n                    }else {\r\n                        this.$message.error(\"保存失败\");\r\n                    }\r\n\r\n\r\n                });\r\n            },\r\n            beforeAvatarUpload(file) {\r\n                const isJPG = file.type === 'image/jpeg' || 'image/png';\r\n                const isLt2M = file.size / 1024 / 1024 < 2;\r\n\r\n                if (!isJPG) {\r\n                    this.$message.error('上传头像图片只能是 JPG 格式!');\r\n                }\r\n                if (!isLt2M) {\r\n                    this.$message.error('上传头像图片大小不能超过 2MB!');\r\n                }\r\n                return isJPG && isLt2M;\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n    .avatar-uploader {\r\n        cursor: pointer;\r\n        position: relative;\r\n        overflow: hidden;\r\n        width: 50px;\r\n        height: 50px;\r\n        border-radius: 50%;\r\n        border: 1px dotted #95b5ea;\r\n        box-shadow: 3px 5px 5px rgba(135,206,235, 0.3);\r\n    }\r\n    .avatar-uploader {\r\n        border-color: #409EFF;\r\n    }\r\n    .avatar-uploader-icon {\r\n        font-size: 26px;\r\n        color: #8c939d;\r\n        width: 50px;\r\n        height: 50px;\r\n        line-height: 50px;\r\n        text-align: center;\r\n    }\r\n</style>"]},"metadata":{},"sourceType":"module"}